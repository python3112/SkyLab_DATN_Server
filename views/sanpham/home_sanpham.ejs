<!DOCTYPE html>
<html>

<head>
  <title>
    <%= title %>
  </title>
  <link rel='stylesheet' href='../stylesheets/style_header.css' />
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>

<body>
  <%- include('../inc/header') %>
  <div class="d-flex flex-row"> 
  <%- include('../inc/sidebar') %>
  <div class="content col-md-10 sm-10"style="overflow: auto; height: 80vh">
    <form id="myForm">
      <div class="row g-3">
        <div class="col">
          <input type="text" id="name" name="name" class="form-control" placeholder="Tên">
        </div>
        <div class="col">
          <input type="text" id="cpu" name="cpu" class="form-control" placeholder="CPU">
        </div>
        <div class="col">
          <input type="text" id="gpu" name="gpu" class="form-control" placeholder="GPU">
        </div>
        <div class="col-auto">
          <button type="button" class="btn btn-primary">Tìm</button>
        </div>
        <div class="col-auto">
          <button type="button" class="btn btn-secondary">Clear</button>
        </div>
        <div class="col-auto">
          <button type="button" class="btn btn-success">Thêm</button>
        </div>
      </div>
    </form>
    <table class="table table-bordered table-hover mt-3">
      <thead>
        <tr class="align-middle text-center">
          <th scope="col" class="col-md-0.5 sm-0.5">STT</th>
          <th scope="col" class="col-md-1 sm-1">Ảnh</th>
          <th scope="col" class="col-md-3.5 sm-3.5">Tên laptop</th>
          <th scope="col" class="col-md-1 sm-1">CPU</th>
          <th scope="col" class="col-md-1 sm-1">GPU</th>
          <th scope="col" class="col-md-1 sm-1">Số lượng</th>
          <th scope="col" class="col-md-1 sm-1">Giá</th>
          <th scope="col" class="col-md-3 sm-3">Hành động</th>
        </tr>
      </thead>
      <t class="table-group-divider">
        <% listSanPham.forEach((product, index)=> { %>
          <tr class="align-middle text-center">
            <th scope="row">
              <%= index + 1 %>
            </th>
            <td><img src="<%= product.anhSanPham %>" alt="Ảnh sản phẩm" width="70"></td>
            <td class="text-truncate overflow-hidden text-start" data-bs-toggle="tooltip"
              title="<%= product.tenSanPham %>">
              <%= product.tenSanPham.substring(0, 30) %>
                <%= product.tenSanPham.length> 30 ? '...' : '' %>
            </td>
            <td>
              <%= product.cpu %>
            </td>
            <td>
              <%= product.gpu %>
            </td>
            <td>
              <%= product.soLuong %>
            </td>
            <td class="text-danger fw-bold total-cell">
              <%= product.giaTien %>
            </td>
            <td>
              <a href="/san-pham/chi-tiet/<%= product._id %>" class="btn btn-primary icon-btn ms-2 me-2">Chi tiết</a>
              <a class="btn btn-info icon-btn me-2">Sửa</a>
              <a class="btn btn-danger icon-btn me-2">Ẩn</a>
            </td>
          </tr>
          <% }); %>
      </tbody>
    </table>
    <nav aria-label="Page navigation example">
      <ul class="pagination justify-content-end">
        <li class="page-item">
          <a class="page-link" href="#" aria-label="Previous">
            <span aria-hidden="true">&laquo;</span>
          </a>
        </li>
        <li class="page-item"><a class="page-link" href="#">1</a></li>
        <li class="page-item"><a class="page-link" href="#">2</a></li>
        <li class="page-item"><a class="page-link" href="#">3</a></li>
        <li class="page-item">
          <a class="page-link" href="#" aria-label="Next">
            <span aria-hidden="true">&raquo;</span>
          </a>
        </li>
      </ul>
    </nav>
  </div>
  </div>
  <%- include('../inc/footer') %>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"></script>
      <script>
        // Function to format currency
        function formatCurrency(amount) {
          return amount.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".") + "₫";
        }

        // Call formatCurrency function for each total amount in the table
        document.addEventListener("DOMContentLoaded", function () {
          const totalCells = document.querySelectorAll(".total-cell");
          totalCells.forEach(cell => {
            const amount = parseFloat(cell.textContent.trim());
            cell.textContent = formatCurrency(amount);
          });
        });
      </script>
</body>

</html>